# ุฏููู ูุธุงู ุงูุตูุงุญูุงุช ุงูุดุงูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุงูุตูุงุญูุงุช ุงููุญุณู ูููุฑ:
- โ **3 ููุงูุจ ุฌุงูุฒุฉ** ููู ุฏูุฑ (ูุงููุ ุนุฑุถ ููุทุ ูุญุฏูุฏ)
- โ **ูุถุน ูุฎุตุต** ููุชุญูู ุงููุฏูู ุงููุงูู
- โ **ุตูุงุญูุงุช ุงูุฃุฒุฑุงุฑ** (ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐูุ ุชุตุฏูุฑุ ุทุจุงุนุฉ)
- โ **ููุชุฑุฉ ุงูุจูุงูุงุช** ุญุณุจ ุงููุดุงุฑูุน ุงููุฎุตุตุฉ
- โ **ูุงุฌูุฉ ุจุณูุทุฉ** ุณููุฉ ุงูุงุณุชุฎุฏุงู

---

## ๐ฏ ุงูููุงูุจ ุงูุฌุงูุฒุฉ

### 1. ูุงูุจ "ุงูุตูุงุญูุงุช ุงููุงููุฉ" (Full Access)
**ูููุจูุนุงุช:**
- ุฌููุน ููุงุฆู ุงููุจูุนุงุช
- ุตูุงุญูุงุช ูุงููุฉ: ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐูุ ุชุตุฏูุฑุ ุทุจุงุนุฉ

**ูููุญุงุณุจุฉ:**
- ุฌููุน ููุงุฆู ุงููุญุงุณุจุฉ
- ุตูุงุญูุงุช ูุงููุฉ: ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐูุ ุชุตุฏูุฑุ ุทุจุงุนุฉ

### 2. ูุงูุจ "ุนุฑุถ ููุท" (View Only)
**ูููุจูุนุงุช:**
- ุนุฑุถ ุชูุงุฑูุฑ ุงููุจูุนุงุช ูุงูุนููุงุก ููุท
- ุตูุงุญูุงุช: ุชุตุฏูุฑ ูุทุจุงุนุฉ ููุท (ุจุฏูู ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู)

**ูููุญุงุณุจุฉ:**
- ุนุฑุถ ุงูุชูุงุฑูุฑ ุงููุงููุฉ ูุงูุญุณุงุจุงุช ููุท
- ุตูุงุญูุงุช: ุชุตุฏูุฑ ูุทุจุงุนุฉ ููุท (ุจุฏูู ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู)

### 3. ูุงูุจ "ูุญุฏูุฏ" (Limited)
**ูููุจูุนุงุช:**
- ุฅุถุงูุฉ ุนููุงุก ูุญุฌูุฒุงุช ููุท
- ุตูุงุญูุงุช: ุฅุถุงูุฉ ูุชุนุฏูู (ุจุฏูู ุญุฐู)

**ูููุญุงุณุจุฉ:**
- ุงููุตุฑููุงุช ูุงูููุงุชูุฑ ููุท
- ุตูุงุญูุงุช: ุฅุถุงูุฉ ูุชุนุฏูู (ุจุฏูู ุญุฐู)

---

## ๐จ ุงููุถุน ุงููุฎุตุต (Custom)

ุนูุฏ ุงุฎุชูุงุฑ "ุงููุถุน ุงููุฎุตุต"ุ ููููู:

### 1. ุงุฎุชูุงุฑ ุงูููุงุฆู
ุงุฎุชุฑ ุงูููุงุฆู ุงูุชู ุชุฑูุฏ ุฅุชุงุญุชูุง ูููุณุชุฎุฏู:
- โ๏ธ ููุญุฉ ุงูุชุญูู
- โ๏ธ ุงูุนููุงุก
- โ๏ธ ุงูุญุฌูุฒุงุช
- โ๏ธ ุงูุชูุงุฑูุฑ
- ุฅูุฎ...

### 2. ุงูุชุญูู ูู ุงูุฃุฒุฑุงุฑ
ุญุฏุฏ ุงูุฃุฒุฑุงุฑ ุงููุชุงุญุฉ ูููุณุชุฎุฏู:
- โ **ุฒุฑ ุงูุฅุถุงูุฉ** (Add): ุงูุณูุงุญ ุจุฅุถุงูุฉ ุณุฌูุงุช ุฌุฏูุฏุฉ
- โ **ุฒุฑ ุงูุชุนุฏูู** (Edit): ุงูุณูุงุญ ุจุชุนุฏูู ุงูุณุฌูุงุช
- โ๏ธ **ุฒุฑ ุงูุญุฐู** (Delete): ุงูุณูุงุญ ุจุญุฐู ุงูุณุฌูุงุช
- โ **ุฒุฑ ุงูุชุตุฏูุฑ** (Export): ุงูุณูุงุญ ุจุชุตุฏูุฑ ุงูุจูุงูุงุช
- โ **ุฒุฑ ุงูุทุจุงุนุฉ** (Print): ุงูุณูุงุญ ุจุทุจุงุนุฉ ุงูุชูุงุฑูุฑ

---

## ๐ ููุชุฑุฉ ุงูุจูุงูุงุช ุญุณุจ ุงููุดุฑูุน

### ุงูููุฑุฉ
ุนูุฏูุง ูุชู ุชุฎุตูุต ูุดุฑูุน ูุนูู ูููุณุชุฎุฏูุ ุณูุฑู **ููุท** ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจูุดุฑูุนู.

### ูุซุงู: ุฏูุชุฑ ุงูุฃุณุชุงุฐ
```typescript
import { filterDataByUserProject } from '@/utils/permissions';

// ูู ุตูุญุฉ ุฏูุชุฑ ุงูุฃุณุชุงุฐ
const loadTransactions = async () => {
  // ุฌูุจ ุฌููุน ุงูุญุฑูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
  const allTransactions = await transactionService.getAll();
  
  // ููุชุฑุฉ ุงูุญุฑูุงุช ุญุณุจ ุงููุดุฑูุน ุงููุฎุตุต ูููุณุชุฎุฏู
  const userTransactions = await filterDataByUserProject(
    allTransactions,
    currentUser.id
  );
  
  setTransactions(userTransactions);
};
```

### ูุซุงู: ุงููุตุฑููุงุช
```typescript
import { filterDataByUserProject, canAccessProject } from '@/utils/permissions';

// ูู ุตูุญุฉ ุงููุตุฑููุงุช
const loadExpenses = async () => {
  const allExpenses = await expenseService.getAll();
  
  // ููุชุฑุฉ ุงููุตุฑููุงุช ุญุณุจ ูุดุฑูุน ุงููุณุชุฎุฏู
  const userExpenses = await filterDataByUserProject(
    allExpenses,
    currentUser.id
  );
  
  setExpenses(userExpenses);
};

// ุนูุฏ ุฅุถุงูุฉ ูุตุฑูู ุฌุฏูุฏ
const handleAddExpense = async (expenseData) => {
  // ุงูุชุญูู ูู ุตูุงุญูุฉ ุงููุตูู ูููุดุฑูุน
  const hasAccess = await canAccessProject(
    currentUser.id,
    expenseData.project_id
  );
  
  if (!hasAccess) {
    alert('ูุง ููููู ุฅุถุงูุฉ ูุตุฑููุงุช ููุฐุง ุงููุดุฑูุน');
    return;
  }
  
  await expenseService.create(expenseData);
};
```

---

## ๐ง ููููุฉ ุงูุชุทุจูู ูู ุงูุตูุญุงุช

### 1. ุงูุชุญูู ูู ุตูุงุญูุฉ ุงูุฃุฒุฑุงุฑ
```typescript
import { canShowButton } from '@/utils/permissions';

// ูู ุฃู ุตูุญุฉ ุชุญุชูู ุนูู ุฃุฒุฑุงุฑ
const { currentUser } = useAuth();

// ูุญุต ุฅุฐุง ูุงู ูููู ุนุฑุถ ุฒุฑ ุงูุฅุถุงูุฉ
const showAddButton = canShowButton(
  currentUser.role,
  'customers', // ููุชุงุญ ุงูุตูุญุฉ
  'add',       // ููุชุงุญ ุงูุฒุฑ
  currentUser.customButtonAccess
);

// ูุญุต ุฅุฐุง ูุงู ูููู ุนุฑุถ ุฒุฑ ุงูุญุฐู
const showDeleteButton = canShowButton(
  currentUser.role,
  'customers',
  'delete',
  currentUser.customButtonAccess
);

// ูู JSX
return (
  <div>
    {showAddButton && (
      <button onClick={handleAdd}>ุฅุถุงูุฉ ุนููู</button>
    )}
    
    {showDeleteButton && (
      <button onClick={handleDelete}>ุญุฐู</button>
    )}
  </div>
);
```

### 2. ููุชุฑุฉ ุงูุจูุงูุงุช ูู ุงูุฌุฏุงูู
```typescript
import { filterDataByUserProject } from '@/utils/permissions';

const SalesPage = () => {
  const { currentUser } = useAuth();
  const [sales, setSales] = useState([]);
  
  useEffect(() => {
    const loadSales = async () => {
      // ุฌูุจ ุฌููุน ุงูุจูุงูุงุช
      const allSales = await salesService.getAll();
      
      // ููุชุฑุฉ ุญุณุจ ูุดุฑูุน ุงููุณุชุฎุฏู (ุฅุฐุง ูู ููู Admin)
      let filteredSales = allSales;
      if (currentUser.role !== 'Admin') {
        filteredSales = await filterDataByUserProject(
          allSales,
          currentUser.id
        );
      }
      
      setSales(filteredSales);
    };
    
    loadSales();
  }, [currentUser]);
  
  return (
    <table>
      {sales.map(sale => (
        <tr key={sale.id}>
          <td>{sale.customer_name}</td>
          <td>{sale.amount}</td>
        </tr>
      ))}
    </table>
  );
};
```

---

## ๐๏ธ ุงุณุชุฎุฏุงู ูุงุฌูุฉ ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช

### 1. ูุชุญ ูุงุฌูุฉ ุงูุตูุงุญูุงุช
ูู ุตูุญุฉ "ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู":
1. ุงููุฑ ุนูู ุฒุฑ "โ๏ธ ุตูุงุญูุงุช" ูููุณุชุฎุฏู
2. ุณุชุธูุฑ ูุงูุฐุฉ ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช

### 2. ุงุฎุชูุงุฑ ุงููุงูุจ
ุงุฎุชุฑ ุฃุญุฏ ุงูููุงูุจ ุงูุซูุงุซุฉ:
- **ูุงูู** - ูููุณุชุฎุฏููู ุงูููุซูููู
- **ุนุฑุถ ููุท** - ูููุฑุงุฌุนูู ูุงููุฑุงูุจูู
- **ูุญุฏูุฏ** - ูููุณุชุฎุฏููู ุงูุฌุฏุฏ

### 3. ุฃู ุงุณุชุฎุฏู ุงููุถุน ุงููุฎุตุต
1. ุงุฎุชุฑ "ุชุฎุตูุต ูุฏูู"
2. ุญุฏุฏ ุงูููุงุฆู ุงููุทููุจุฉ
3. ุญุฏุฏ ุงูุฃุฒุฑุงุฑ ุงููุทููุจุฉ
4. ุงุญูุธ ุงูุชุบููุฑุงุช

---

## ๐ ุงูุฃูุงู ูุงูุญูุงูุฉ

### Admin
- ูุฑู ุฌููุน ุงูููุงุฆู ูุงูุจูุงูุงุช
- ูุฏูู ุตูุงุญูุงุช ูุงููุฉ ุนูู ูู ุดูุก
- ูุง ูุชุฃุซุฑ ุจููุชุฑุฉ ุงููุดุงุฑูุน

### Sales / Accounting
- ูุฑู ููุท ุงูููุงุฆู ุงููุญุฏุฏุฉ ูู
- ูุฑู ููุท ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจูุดุฑูุนู
- ูุชุญูู ููู Admin ุนุจุฑ ุงูุฃุฒุฑุงุฑ

---

## ๐ ุฃูุซูุฉ ุนูููุฉ

### ูุซุงู 1: ููุธู ูุจูุนุงุช ูุญุฏูุฏ
**ุงูุฅุนุฏุงุฏ:**
- ุงููุงูุจ: "ูุญุฏูุฏ"
- ุงููุดุฑูุน ุงููุฎุตุต: "ูุดุฑูุน ุงููุฎูู"

**ุงููุชูุฌุฉ:**
- ููููู ุฅุถุงูุฉ ุนููุงุก ูุญุฌูุฒุงุช ุฌุฏูุฏุฉ
- ููููู ุชุนุฏูู ุจูุงูุงุชู
- ูุง ููููู ุงูุญุฐู
- ูุฑู ููุท ุนููุงุก "ูุดุฑูุน ุงููุฎูู"

### ูุซุงู 2: ูุญุงุณุจ ุนุฑุถ ููุท
**ุงูุฅุนุฏุงุฏ:**
- ุงููุงูุจ: "ุนุฑุถ ููุท"
- ุงููุดุฑูุน ุงููุฎุตุต: "ูุดุฑูุน ุงููุงุณููู"

**ุงููุชูุฌุฉ:**
- ููููู ุนุฑุถ ุงูุชูุงุฑูุฑ ุงููุงููุฉ
- ููููู ุชุตุฏูุฑ ูุทุจุงุนุฉ ุงูุชูุงุฑูุฑ
- ูุง ููููู ุฅุถุงูุฉ ุฃู ุชุนุฏูู ุฃู ุญุฐู
- ูุฑู ููุท ุญุณุงุจุงุช "ูุดุฑูุน ุงููุงุณููู"

### ูุซุงู 3: ูุฏูุฑ ูุจูุนุงุช ูุงูู
**ุงูุฅุนุฏุงุฏ:**
- ุงููุงูุจ: "ูุงูู"
- ุงููุดุงุฑูุน ุงููุฎุตุตุฉ: "ุงููุฎูู"ุ "ุงููุงุณููู"

**ุงููุชูุฌุฉ:**
- ุตูุงุญูุงุช ูุงููุฉ ุนูู ุงููุจูุนุงุช
- ูุฑู ุจูุงูุงุช ูุดุฑูุนู "ุงููุฎูู" ู"ุงููุงุณููู"
- ููููู ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐูุ ุชุตุฏูุฑุ ุทุจุงุนุฉ

---

## ๐จ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดููุฉ: ุงูููุงุฆู ูุง ุชุธูุฑ
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุชุนููู ุตูุงุญูุงุช ูููุณุชุฎุฏู
2. ุชุญูู ูู ุฃู ุงูููุงุฆู ูุญุฏุฏุฉ ูู ุงููุงูุจ
3. ุชุฃูุฏ ูู refresh ุงูุตูุญุฉ ุจุนุฏ ุงูุชุญุฏูุซ

### ูุดููุฉ: ุงูุจูุงูุงุช ูุงุฑุบุฉ
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุชุฎุตูุต ูุดุฑูุน ูููุณุชุฎุฏู
2. ุชุญูู ูู ุฃู ุงูุจูุงูุงุช ุชุญุชูู ุนูู `project_id`
3. ุงุณุชุฎุฏู `filterDataByUserProject` ูู ููุฏ ุงูุตูุญุฉ

### ูุดููุฉ: ุงูุฃุฒุฑุงุฑ ูุง ุชุธูุฑ/ุชุฎุชูู
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู `canShowButton` ูู ุงูููุฏ
2. ุชุญูู ูู ุตูุงุญูุงุช ุงูุฃุฒุฑุงุฑ ูู ุงููุถุน ุงููุฎุตุต
3. ุชุฃูุฏ ูู ุชูุฑูุฑ `customButtonAccess` ููุฏุงูุฉ

---

## ๐ ุงูุฏูุงู ุงููุชุงุญุฉ

| ุงูุฏุงูุฉ | ุงููุตู | ุงูุงุณุชุฎุฏุงู |
|--------|-------|----------|
| `canAccessPage` | ูุญุต ุตูุงุญูุฉ ุงููุตูู ููุงุฆูุฉ | ุงูุชุญูู ูู ุนุฑุถ ุงููุงุฆูุฉ |
| `canShowButton` | ูุญุต ุตูุงุญูุฉ ุนุฑุถ ุฒุฑ | ุงูุชุญูู ูู ุงูุฃุฒุฑุงุฑ |
| `getPermissions` | ุงูุญุตูู ุนูู ุตูุงุญูุงุช ุงูููุฑุฏ | ุนูููุงุช CRUD |
| `filterDataByUserProject` | ููุชุฑุฉ ุงูุจูุงูุงุช ุญุณุจ ุงููุดุฑูุน | ุนุฑุถ ุงูุจูุงูุงุช |
| `canAccessProject` | ูุญุต ุตูุงุญูุฉ ุงููุตูู ููุดุฑูุน | ุงูุชุญูู ูู ุงูุนูููุงุช |
| `applyPermissionPreset` | ุชุทุจูู ูุงูุจ ุตูุงุญูุงุช | ุฅุนุฏุงุฏ ุงูุตูุงุญูุงุช |

---

## โ ุงูุฎูุงุตุฉ

ูุธุงู ุงูุตูุงุญูุงุช ุงููุญุณู ูููุฑ:
1. **ุจุณุงุทุฉ** - 3 ููุงูุจ ุฌุงูุฒุฉ + ูุถุน ูุฎุตุต
2. **ูุฑููุฉ** - ุชุญูู ูุงูู ูู ุงูููุงุฆู ูุงูุฃุฒุฑุงุฑ
3. **ุฃูุงู** - ููุชุฑุฉ ุงูุจูุงูุงุช ุญุณุจ ุงููุดุฑูุน
4. **ุณูููุฉ** - ูุงุฌูุฉ ูุงุถุญุฉ ููุจุงุดุฑุฉ

ููุงุณุชุฎุฏุงู ุงููููู:
- ุงุฎุชุฑ ุงููุงูุจ ุงูููุงุณุจ ูููุณุชุฎุฏู
- ุฎุตุต ูู ูุดุฑูุน (ุฅุฐุง ูุฒู ุงูุฃูุฑ)
- ุงุณุชุฎุฏู ุงููุถุน ุงููุฎุตุต ููุญุงูุงุช ุงูุฎุงุตุฉ
